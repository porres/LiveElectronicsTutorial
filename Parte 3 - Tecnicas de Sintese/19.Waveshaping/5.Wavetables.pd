#N canvas 109 134 725 659 10;
#X obj 102 379 hsl 128 15 0 1 0 0 empty empty ganho -2 -6 0 10 -203904
-1 -1 0 0;
#N canvas 232 59 524 385 ganho 0;
#X obj 355 196 *~;
#X obj 343 228 dac~;
#X obj 384 166 line~;
#X msg 384 140 \$1 10;
#X obj 384 114 pow 4;
#X obj 384 87 inlet;
#X obj 324 48 inlet~;
#X obj 135 135 metro 441;
#X obj 135 84 loadbang;
#X obj 135 111 tgl 15 0 empty empty empty 17 7 0 10 -203904 -1 -1 1
1;
#X msg 58 166 \; pd dsp 1;
#X obj 205 259 tabwrite~ \$0-waveshape;
#X connect 0 0 1 0;
#X connect 0 0 1 1;
#X connect 2 0 0 1;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X connect 6 0 11 0;
#X connect 7 0 11 0;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 7 0;
#X restore 54 403 pd ganho;
#X obj 71 485 cnv 15 198 138 empty empty empty 20 12 0 14 -203904 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-waveshape 441 float 1;
#A 0 -0.332825 -0.321518 -0.30954 -0.296951 -0.283798 -0.270126 -0.256012
-0.241455 -0.226593 -0.211395 -0.196014 -0.180374 -0.164688 -0.148865
-0.133057 -0.117249 -0.101532 -0.0859375 -0.0704956 -0.0552979 -0.0402985
-0.0256653 -0.0112915 0.00262451 0.0162201 0.0293274 0.0420074 0.0541687
0.0658569 0.0769806 0.0875702 0.0975952 0.10704 0.115906 0.124161 0.131836
0.13887 0.14534 0.151154 0.156403 0.161011 0.16507 0.168518 0.171402
0.173721 0.175491 0.176743 0.177475 0.177704 0.177444 0.176727 0.175583
0.173996 0.172028 0.169678 0.166977 0.163956 0.160629 0.156998 0.153137
0.149033 0.144699 0.140198 0.135529 0.130722 0.125763 0.120758 0.115646
0.110504 0.105301 0.100113 0.0949249 0.0897369 0.08461 0.0795288 0.0745392
0.0696259 0.0648346 0.0601349 0.0555878 0.0511475 0.0469208 0.0428162
0.0389099 0.0351562 0.031601 0.0282593 0.0250854 0.0221558 0.0194092
0.0168915 0.0145874 0.0125275 0.0106506 0.0090332 0.00759888 0.00642395
0.00546265 0.00469971 0.00416565 0.00386047 0.00376892 0.00387573 0.00416565
0.00468445 0.00538635 0.00630188 0.00735474 0.00863647 0.0100708 0.011673
0.0134277 0.0153503 0.017395 0.0196228 0.0219574 0.0244141 0.0269928
0.0296783 0.0325012 0.0353699 0.0383911 0.0414276 0.0445862 0.0477753
0.0510712 0.0543671 0.0577545 0.0611572 0.0645905 0.0680695 0.0715332
0.075058 0.078537 0.0820618 0.0855255 0.0890656 0.0924683 0.095932
0.0993195 0.102707 0.106018 0.109299 0.112534 0.115707 0.118851 0.121872
0.124878 0.127747 0.13063 0.133316 0.136032 0.13855 0.141068 0.143433
0.145721 0.147888 0.149979 0.151962 0.153809 0.155594 0.157211 0.158783
0.160141 0.161499 0.162598 0.163681 0.164581 0.165405 0.166061 0.166641
0.167068 0.167358 0.167542 0.167557 0.167542 0.167282 0.167023 0.166489
0.165955 0.165207 0.164398 0.163406 0.162354 0.161133 0.159821 0.158371
0.156799 0.155151 0.15332 0.151474 0.149414 0.147354 0.145065 0.142776
0.14032 0.137817 0.135193 0.132477 0.129684 0.126801 0.123871 0.120804
0.117752 0.114517 0.111343 0.107986 0.104691 0.101242 0.0978241 0.0942993
0.0908051 0.0872498 0.0836792 0.0800934 0.0764618 0.0728912 0.0692444
0.0656891 0.0620575 0.0585327 0.0549316 0.0514679 0.0479584 0.0445557
0.0411682 0.0378571 0.0346069 0.0314484 0.0283661 0.0253601 0.0224762
0.0196533 0.0169983 0.0144043 0.0119629 0.00964355 0.00747681 0.00544739
0.00358582 0.00184631 0.000305176 -0.00108337 -0.00227356 -0.0032959
-0.00411987 -0.00476074 -0.00520325 -0.00543213 -0.00546265 -0.00527954
-0.00489807 -0.00428772 -0.00346375 -0.00241089 -0.00114441 0.000335693
0.00204468 0.00398254 0.00610352 0.00848389 0.0110474 0.0138397 0.0168304
0.0200348 0.023407 0.0269928 0.0307465 0.0346832 0.0387878 0.0430298
0.0474243 0.0519257 0.0565948 0.0613251 0.0661926 0.0710907 0.0760956
0.0811157 0.0861816 0.0912476 0.0963135 0.101334 0.106308 0.111221
0.116043 0.120773 0.125336 0.129776 0.134003 0.138062 0.141861 0.145462
0.148743 0.151749 0.154434 0.156784 0.158752 0.160355 0.161545 0.162292
0.162598 0.162445 0.161804 0.16066 0.158981 0.156784 0.154007 0.150696
0.146805 0.142334 0.137283 0.131622 0.125381 0.11853 0.111099 0.103043
0.0944443 0.0852051 0.0754471 0.0650787 0.0542145 0.0427856 0.0308762
0.0184555 0.00559235 -0.00769806 -0.0214157 -0.0354691 -0.0498886 -0.0645752
-0.0795746 -0.0947189 -0.110123 -0.125587 -0.14119 -0.156792 -0.172409
-0.187943 -0.203354 -0.218597 -0.233627 -0.248383 -0.262772 -0.276825
-0.290375 -0.303467 -0.315979 -0.327927 -0.339188 -0.349762 -0.359573
-0.368591 -0.376755 -0.384033 -0.390396 -0.395798 -0.400192 -0.40358
-0.405914 -0.407181 -0.407364 -0.406433 -0.404388 -0.401245 -0.396957
-0.391586 -0.385101 -0.377533 -0.368881 -0.359192 -0.348495 -0.336792
-0.324158 -0.310608 -0.296219 -0.280991 -0.26506 -0.248413 -0.23114
-0.213318 -0.195007 -0.17627 -0.157196 -0.137878 -0.118347 -0.0987549
-0.0791016 -0.0595703 -0.0401154 -0.0209503 -0.00205994 0.0163879 0.0343933
0.0518341 0.0686188 0.0847168 0.100021 0.114502 0.128052 0.14064 0.152206
0.162689 0.172058 0.180267 0.187271 0.193085 0.197647 0.200943 0.203003
0.203781 0.203293 0.201584 0.198624 0.194473 0.189133 0.182678 0.17511
0.166519 0.156937 0.146439 0.135071 0.122925 0.110046 0.0965576 0.0825195
0.0680084 0.0531158 0.0379333 0.0225677 0.00709534 -0.00837708 -0.0237885
-0.0390015 -0.0539551 -0.0685272 -0.0826721 -0.096283 -0.109283 -0.121582
-0.133118;
#X coords 0 1.1 440 -1.1 200 140 1;
#X restore 70 484 graph;
#X text 56 479 1;
#X text 50 611 -1;
#X text 56 546 0;
#X obj 54 224 wrap~;
#X floatatom 54 39 5 0 0 0 - - -;
#X obj 54 73 osc~ 40;
#X obj 368 273 loadbang;
#X obj 359 442 cnv 15 278 178 empty empty empty 20 12 0 14 -233017
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-shape 4099 float 0;
#X coords 0 1 4098 -1 280 180 1;
#X restore 358 441 graph;
#X text 345 174 Uma característica geral de waveshaping é que a amplitude
do sinal de entrada interfere no resultado sonoro. Neste exemplo \,
inclusive \, extrapolamos os valores de -1 e 1 no sinal de entrada.
Porém \, mantemos o sinal em "loop" na tabela com um objeto [wrap~].
;
#X text 99 222 mantém entre 0 e 1;
#X text 179 297 função de transferência;
#X text 103 332 filtra DC Offset;
#X text 344 32 A forma clássica de trabalhar com waveshaping é com
uma função de transferência em uma tabela \, como vimos no exemplo
de introdução - sendo que a amplitude 0 deve ser o ponto médio da tabela.
Por isso temos um ajuste de DC Offset.;
#X text 344 108 Aqui \, usamos os comandos "sinesum" e "cosinesum"
para gerarmos funções de transferência em uma tabela. Não que esses
comandos sejam propícios para gerar funções de waveshaping \, mas nada
impede...;
#X msg 379 331 cosinesum 4096 0 1 1 0.3 0.2 0.9 \, normalize;
#X obj 368 362 send \$0-shape;
#X obj 54 297 tabread4~ \$0-shape;
#X obj 54 178 expr~ $v1 * 0.5 + 0.5;
#X text 190 178 <= DC Offset;
#X obj 54 119 *~;
#X obj 115 126 line~;
#X msg 114 96 \$1 10;
#X obj 114 72 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0.818898 256;
#X obj 117 48 hsl 128 15 0 8 0 0 empty empty empty -2 -8 0 10 -228856
-1 -1 1300 1;
#X text 150 29 amplitude;
#X text 65 151 -1 a 1;
#X text 66 200 0 a 1;
#X msg 368 297 sinesum 4096 1 0.5 1 0.3 0.2 0.9 \, normalize;
#X obj 54 261 expr~ $v1 * 4096 + 1;
#X text 187 261 índices (1 a 4097);
#X obj 54 332 hip~ 5;
#X connect 0 0 1 1;
#X connect 7 0 33 0;
#X connect 8 0 9 0;
#X connect 9 0 24 0;
#X connect 10 0 32 0;
#X connect 19 0 20 0;
#X connect 21 0 35 0;
#X connect 22 0 7 0;
#X connect 24 0 22 0;
#X connect 25 0 24 1;
#X connect 26 0 25 0;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 32 0 20 0;
#X connect 33 0 21 0;
#X connect 35 0 1 0;
