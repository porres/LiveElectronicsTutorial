#N canvas 617 24 511 560 10;
#X obj 161 125 loadbang;
#X obj 146 249 output~;
#N canvas 113 23 607 622 control 0;
#X obj 337 154 block~ 512 1 1;
#X obj 101 251 cnv 15 428 182 empty empty empty 20 12 0 14 -204800
-66577 0;
#X obj 112 182 phasor~;
#X msg 234 186 0 0.5 1 0.5 0;
#X obj 234 163 loadbang;
#X obj 106 258 tof/breakpoints~;
#X obj 59 94 loadbang;
#X obj 59 121 samplerate~;
#X obj 106 406 hsl 202 23 0 200 0 0 \$0-del-depth \$0-del-depth-set
Delay-Depth 40 11 0 19 -66577 -204800 -262144 0 0;
#X obj 81 447 tabsend~ \$0-env;
#X obj 323 258 tof/breakpoints~;
#X obj 323 406 hsl 202 23 0 1 0 0 \$0-feedback \$0-feedback-set Feedback
40 11 0 19 -66577 -204800 -262144 0 0;
#X obj 305 463 tabsend~ \$0-fb;
#X obj 59 144 expr~ $v1 / 256;
#X obj 82 472 table \$0-env 256;
#X obj 302 486 table \$0-fb 256;
#X connect 2 0 5 0;
#X connect 2 0 10 0;
#X connect 3 0 5 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 13 0;
#X connect 10 0 12 0;
#X connect 13 0 2 0;
#X coords 0 -1 1 1 430 184 2 100 250;
#X restore 41 334 pd control;
#X text 75 38 Como variação do exemplo anterior \, temos agora a inclusão
de um controle de Feedback. Para ter graça \, também usamos um envelope
para gerar valores de feedback diferentes para cada ponto da FFT. Abra
o subpatch e confira.;
#N canvas 132 30 940 513 Feedback-SpecDelay 0;
#X obj 81 123 block~ 512 4;
#X obj 36 240 *~;
#X obj 36 32 inlet~;
#X obj 36 264 rfft~;
#X obj 51 216 tabreceive~ \$0-hann;
#X obj 89 401 *~;
#X obj 122 402 tabreceive~ \$0-hann;
#X obj 89 348 rifft~;
#X obj 89 461 outlet~;
#X obj 245 292 *~;
#X obj 178 334 *~;
#X obj 178 248 vd~ \$0-re;
#X obj 245 247 vd~ \$0-im;
#X obj 89 378 /~ 768;
#X obj 314 212 cnv 15 150 120 empty empty feedback 20 12 0 14 -203904
-66577 0;
#X obj 245 340 delwrite~ \$0-im 2232;
#X obj 178 364 delwrite~ \$0-re 2232;
#N canvas 0 22 454 245 hann 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 512 float 1;
#A 0 0 3.76403e-05 0.000150561 0.000338763 0.000602216 0.000940859
0.00135466 0.00184357 0.00240749 0.00304636 0.00376007 0.00454852 0.00541157
0.00634909 0.00736094 0.00844702 0.00960711 0.010841 0.0121486 0.0135297
0.014984 0.0165114 0.0181116 0.0197844 0.0215294 0.0233465 0.0252355
0.0271959 0.0292275 0.03133 0.0335031 0.0357464 0.0380597 0.0404425
0.0428946 0.0454154 0.0480047 0.0506621 0.0533872 0.0561795 0.0590386
0.0619642 0.0649558 0.0680128 0.071135 0.0743217 0.0775724 0.0808868
0.0842644 0.0877045 0.0912068 0.0947705 0.0983953 0.102081 0.105826
0.10963 0.113494 0.117415 0.121395 0.125431 0.129523 0.133672 0.137875
0.142133 0.146445 0.150811 0.155229 0.159698 0.164219 0.168791 0.173412
0.178083 0.182802 0.187569 0.192383 0.197243 0.202149 0.2071 0.212095
0.217133 0.222213 0.227336 0.2325 0.237704 0.242947 0.248229 0.253549
0.258907 0.2643 0.269729 0.275193 0.28069 0.286221 0.291784 0.297378
0.303002 0.308657 0.31434 0.320051 0.325789 0.331554 0.337343 0.343157
0.348995 0.354856 0.360738 0.366642 0.372565 0.378508 0.384469 0.390448
0.396443 0.402453 0.408478 0.414517 0.420569 0.426633 0.432708 0.438793
0.444887 0.45099 0.4571 0.463216 0.469338 0.475464 0.481594 0.487727
0.493862 0.499998 0.506134 0.512269 0.518402 0.524532 0.530659 0.53678
0.542897 0.549007 0.555109 0.561203 0.567288 0.573363 0.579427 0.585479
0.591518 0.597543 0.603554 0.609549 0.615527 0.621488 0.627431 0.633354
0.639258 0.64514 0.651001 0.656839 0.662653 0.668443 0.674207 0.679946
0.685657 0.69134 0.696994 0.702619 0.708213 0.713776 0.719306 0.724804
0.730267 0.735696 0.74109 0.746447 0.751767 0.75705 0.762293 0.767497
0.772661 0.777783 0.782864 0.787902 0.792897 0.797848 0.802754 0.807614
0.812428 0.817195 0.821914 0.826585 0.831206 0.835778 0.840299 0.844769
0.849187 0.853552 0.857864 0.862122 0.866326 0.870474 0.874567 0.878603
0.882582 0.886504 0.890367 0.894172 0.897917 0.901602 0.905227 0.908791
0.912293 0.915733 0.919111 0.922426 0.925676 0.928863 0.931985 0.935042
0.938034 0.94096 0.943819 0.946611 0.949336 0.951994 0.954583 0.957104
0.959556 0.961939 0.964252 0.966496 0.968669 0.970771 0.972803 0.974763
0.976652 0.978469 0.980215 0.981887 0.983488 0.985015 0.986469 0.987851
0.989158 0.990392 0.991552 0.992638 0.99365 0.994588 0.995451 0.996239
0.996953 0.997592 0.998156 0.998645 0.999059 0.999398 0.999661 0.999849
0.999962 1 0.999962 0.999849 0.999661 0.999398 0.999059 0.998645 0.998157
0.997593 0.996954 0.99624 0.995452 0.994589 0.993651 0.992639 0.991553
0.990393 0.989159 0.987852 0.986471 0.985016 0.983489 0.981889 0.980216
0.978471 0.976654 0.974765 0.972805 0.970773 0.96867 0.966497 0.964254
0.961941 0.959558 0.957106 0.954585 0.951996 0.949338 0.946613 0.943821
0.940962 0.938036 0.935045 0.931988 0.928866 0.925679 0.922428 0.919114
0.915736 0.912296 0.908794 0.90523 0.901605 0.89792 0.894175 0.89037
0.886507 0.882585 0.878606 0.87457 0.870478 0.866329 0.862126 0.857867
0.853555 0.84919 0.844772 0.840303 0.835782 0.83121 0.826589 0.821918
0.817199 0.812432 0.807618 0.802758 0.797852 0.792901 0.787906 0.782868
0.777788 0.772665 0.767501 0.762297 0.757054 0.751772 0.746452 0.741094
0.735701 0.730272 0.724808 0.719311 0.71378 0.708218 0.702623 0.696999
0.691344 0.685661 0.67995 0.674212 0.668448 0.662658 0.656844 0.651006
0.645145 0.639263 0.633359 0.627436 0.621493 0.615532 0.609554 0.603559
0.597548 0.591523 0.585484 0.579432 0.573368 0.567293 0.561208 0.555114
0.549012 0.542902 0.536785 0.530664 0.524537 0.518407 0.512274 0.506139
0.500003 0.493867 0.487733 0.4816 0.475469 0.469343 0.463221 0.457105
0.450995 0.444892 0.438798 0.432713 0.426638 0.420574 0.414522 0.408483
0.402458 0.396448 0.390453 0.384474 0.378513 0.37257 0.366647 0.360743
0.354861 0.349 0.343162 0.337348 0.331558 0.325794 0.320055 0.314344
0.308662 0.303007 0.297383 0.291788 0.286226 0.280695 0.275197 0.269734
0.264305 0.258911 0.253554 0.248234 0.242952 0.237708 0.232504 0.22734
0.222218 0.217137 0.212099 0.207104 0.202153 0.197247 0.192387 0.187573
0.182806 0.178087 0.173416 0.168795 0.164223 0.159702 0.155232 0.150814
0.146449 0.142137 0.137879 0.133675 0.129527 0.125434 0.121398 0.117419
0.113497 0.109633 0.105829 0.102084 0.0983985 0.0947736 0.0912097 0.0877074
0.0842672 0.0808896 0.0775752 0.0743243 0.0711375 0.0680154 0.0649583
0.0619667 0.0590411 0.0561818 0.0533894 0.0506643 0.0480068 0.0454175
0.0428965 0.0404444 0.0380615 0.0357484 0.033505 0.0313318 0.0292293
0.0271976 0.0252371 0.0233481 0.0215309 0.0197858 0.018113 0.0165127
0.0149853 0.0135309 0.0121497 0.0108421 0.00960806 0.00844792 0.0073618
0.00634986 0.00541225 0.00454915 0.00376073 0.00304696 0.00240803 0.00184402
0.00135505 0.000941187 0.000602454 0.000338942 0.000150681 3.76999e-05
;
#X coords 0 1 511 0 200 100 1;
#X restore 82 35 graph;
#X msg 313 80 \; pd dsp 1;
#X obj 313 52 loadbang;
#X connect 2 0 1 0;
#X restore 95 156 pd hann;
#X obj 358 306 line~;
#X obj 322 293 *~;
#X msg 358 280 \$1 500;
#X obj 322 235 tabreceive~ \$0-fb;
#X obj 358 258 r \$0-feedback;
#X obj 238 75 cnv 15 265 120 empty empty tempo-delay 20 12 0 14 -203904
-66577 0;
#X obj 368 124 samplerate~;
#X obj 368 95 loadbang;
#X obj 245 146 *~;
#X obj 274 146 r \$0-del-depth;
#X obj 245 120 tabreceive~ \$0-env;
#X obj 245 171 expr~ rint($v1) * $f2;
#X obj 368 147 expr 512 * 1000 / $f1;
#X text 394 169 janela em ms;
#X text 523 95 O patch continua exatamente o mesmo do exemplo anterior
\, compare entenda. Só temos agora um feedback da linha de delay.;
#X text 483 234 O controle de feedback é feito com um gerador de envelope
\, só que até mais simples \, pois não precisamos de ajuste para múltiplos
de tempo da janela de FFT. Temos somente um controle de feedback \,
que controla o feedback máximo (que pode ser até 0.99).;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 3 0 16 0;
#X connect 3 1 15 0;
#X connect 4 0 1 1;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 7 0 13 0;
#X connect 9 0 15 0;
#X connect 10 0 16 0;
#X connect 11 0 7 0;
#X connect 11 0 10 0;
#X connect 12 0 7 1;
#X connect 12 0 9 0;
#X connect 13 0 5 0;
#X connect 18 0 19 1;
#X connect 19 0 9 1;
#X connect 19 0 10 1;
#X connect 20 0 18 0;
#X connect 21 0 19 0;
#X connect 22 0 20 0;
#X connect 24 0 30 0;
#X connect 25 0 24 0;
#X connect 26 0 29 0;
#X connect 27 0 26 1;
#X connect 28 0 26 0;
#X connect 29 0 12 0;
#X connect 29 0 11 0;
#X connect 30 0 29 1;
#X coords 0 0 1 1 230 100 0;
#X restore 161 216 pd Feedback-SpecDelay;
#X msg 161 150 open ../../../samples/guitar.wav \, 1;
#X obj 161 181 readsf~;
#X connect 0 0 5 0;
#X connect 4 0 1 0;
#X connect 4 0 1 1;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 6 1 5 0;
#X coords 0 0 1 1 560 350 0;
