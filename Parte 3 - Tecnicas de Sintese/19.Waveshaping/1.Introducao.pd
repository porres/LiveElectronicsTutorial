#N canvas 80 45 863 739 10;
#X obj 513 553 cnv 15 198 138 empty empty empty 20 12 0 14 -203904
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array waveshaping 441 float 1;
#A 0 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754 -0.00226754
-0.00226754 -0.00226754 -0.00226754;
#X coords 0 1.1 440 -1.1 200 140 1;
#X restore 512 552 graph;
#X text 498 547 1;
#X text 492 679 -1;
#X text 498 614 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array shape 441 float 0;
#X coords 0 1.1 440 -1.1 200 140 1;
#X restore 503 81 graph;
#X obj 504 82 cnv 15 198 138 empty empty empty 20 12 0 14 -204786 -66577
0;
#X text 487 81 1;
#X text 481 205 -1;
#X text 488 140 0;
#X text 598 220 0;
#X text 492 222 -1;
#X text 701 223 1;
#N canvas 96 52 322 399 shape 0;
#X msg 152 155 0;
#X obj 89 177 phasor~ 100;
#X msg 116 97 \; pd dsp 1;
#X obj 17 74 trigger bang bang;
#X obj 17 50 loadbang;
#X obj 17 117 delay 500;
#X obj 89 199 triangle~ 1;
#X obj 119 330 tabwrite~ shape;
#X obj 169 272 clip~ -1 1;
#X obj 197 248 * -1;
#X obj 199 126 t b f;
#X obj 199 102 r clip;
#X connect 0 0 1 1;
#X connect 1 0 6 0;
#X connect 3 0 5 0;
#X connect 3 1 2 0;
#X connect 4 0 3 0;
#X connect 5 0 0 0;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 8 0 7 0;
#X connect 9 0 8 1;
#X connect 10 0 0 0;
#X connect 10 0 7 0;
#X connect 10 1 9 0;
#X connect 10 1 8 2;
#X connect 11 0 10 0;
#X restore 651 63 pd shape;
#N canvas 301 34 450 300 plot 0;
#X obj 135 135 metro 441;
#X obj 135 84 loadbang;
#X obj 135 111 tgl 15 0 empty empty empty 17 7 0 10 -203904 -1 -1 1
1;
#X obj 205 190 tabwrite~ waveshaping;
#X obj 237 127 catch~ \$0-out;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 4 0 3 0;
#X restore 666 693 pd plot;
#X obj 570 355 nbx 5 19 -1e+37 1e+37 0 0 clip empty empty 0 -8 0 17
-261682 -1 -1 0 256;
#X obj 573 327 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -261682
-1 -1 0 1;
#X text 503 324 Clipping;
#X msg 570 298 1;
#X text 600 297 Ressetar;
#X text 462 128 h;
#X text 462 140 a;
#X text 462 151 p;
#X text 462 162 e;
#X text 462 115 S;
#X text 461 100 |;
#X text 461 90 |;
#X text 462 187 |;
#X text 462 177 |;
#X text 534 246 ---- sinal de áudio -----;
#X text 37 30 A técnica de Waveshaping se resume a passar o sinal por
uma Função de Transferência - ao lado temos uma tabela que será usada
como tal.;
#X text 506 30 FUNÇÃO DE TRANSFERÊNCIA:;
#X text 38 121 No caso de uma função linear \, como carregada por padrão
neste exemplo \, o waveshaping não altera em nada o sinal de entrada.
;
#X text 39 167 Podemos usar o waveshaping para fazer uma distorção
de clipping. É uma boa maneira de entender como a função de transferência
interfere no resultado sonoro.;
#X text 39 210 Temos ao lado um slider vertical que dá o valor máximo
de amplitude \, acima da qual será clipado. Veja como fica o desenho
da Função de Transferência.;
#X obj 256 397 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -204786
-1 -1 0 1;
#X floatatom 253 419 5 0 0 0 - - -;
#X obj 253 467 line~;
#X msg 253 441 \$1 10;
#X obj 194 509 *~;
#X text 237 508 Amplitude;
#X obj 32 539 cnv 15 350 100 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 232 59 265 183 output 0;
#X obj 66 111 dac~;
#X obj 90 39 inlet~;
#X obj 115 114 throw~ \$0-out;
#X connect 1 0 2 0;
#X connect 1 0 0 0;
#X connect 1 0 0 1;
#X restore 194 658 pd output;
#X obj 194 545 expr~ ($v1 * 0.5) + 0.5;
#X text 126 567 Tamanho da;
#X text 135 582 tabela;
#X text 45 615 Função de Transferência;
#X text 39 328 Você pode desenhar na tabela de Função de Transferência
e ver o resultado. Para ressetar \, basta clicar na mensagem "1" ligada
ao slider horizontal.;
#X obj 418 400 cnv 15 400 116 empty empty empty 20 12 0 14 -262130
-66577 0;
#X obj 194 615 tabread4~ shape;
#X text 552 261 (índice da tabela);
#X text 37 75 O sinal de áudio (que no caso vai de -1 a 1) entra como
índice da tabela (eixo horizontal) \, a saída da função é o eixo vertical
e dá o valor de amplitude após o waveshaping.;
#X text 140 546 (0 a 1);
#X text 292 615 lê tabela;
#X obj 194 580 *~ 440;
#X text 244 579 (0 a 440);
#X text 39 255 Abaixo temos o sinal de entrada - uma simples senóide
e seu controle de amplitude - passando pela seção de waveshaping. Primeiro
\, há um ajuste para deixar o sinal de áudio com o tamanho da tabela
\, que tem 441 pontos (índices de 0 a 440) e é lida pelo objeto [tabread4~].
;
#N canvas 192 26 507 497 input 0;
#X obj 107 375 outlet~;
#X msg 107 233 choice \$1;
#X obj 107 200 + 1;
#X obj 107 121 vradio 20 1 0 3 empty empty empty 0 -8 0 10 -175595
-1 -1 0;
#X text 130 123 Senóide;
#X text 132 164 [adc~];
#X obj 107 48 loadbang;
#X msg 107 75 0;
#X obj 107 324 polygate~ 3 100;
#X obj 124 285 osc~ 440;
#X obj 236 284 adc~ 1;
#X text 131 142 Sample;
#X obj 248 133 loadbang;
#X obj 248 183 readsf~;
#X msg 248 158 open ../../samples/guitar.wav \, start;
#X connect 1 0 8 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 8 0 0 0;
#X connect 9 0 8 0;
#X connect 10 0 8 2;
#X connect 12 0 14 0;
#X connect 13 0 8 1;
#X connect 13 1 14 0;
#X connect 14 0 13 0;
#X coords 0 -1 1 1 80 90 1 100 100;
#X restore 134 396 pd input;
#X text 438 407 Assim como a Modulação Em Anel/Amplitude \, o Waveshaping
é uma técnica que pode ser aplicada em qualquer sinal. Ou seja \, antes
de ser um gerador de som \, é um processamento! Experimente então também
com o sinal de áudio de um sample ou da entrada do [adc~].;
#X text 438 482 Enquanto processamento de sinal de áudio \, o waveshaping
é muito usado como ferramenta de distorção.;
#X connect 16 0 15 0;
#X connect 18 0 16 0;
#X connect 35 0 36 0;
#X connect 36 0 38 0;
#X connect 37 0 39 1;
#X connect 38 0 37 0;
#X connect 39 0 43 0;
#X connect 43 0 54 0;
#X connect 49 0 42 0;
#X connect 54 0 49 0;
#X connect 57 0 39 0;
